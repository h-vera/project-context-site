var hub_common=(()=>{var d=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var g=(c,e)=>{for(var s in e)d(c,s,{get:e[s],enumerable:!0})},S=(c,e,s,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of p(e))!v.call(c,n)&&n!==s&&d(c,n,{get:()=>e[n],enumerable:!(t=y(e,n))||t.enumerable});return c};var b=c=>S(d({},"__esModule",{value:!0}),c);var E={};g(E,{default:()=>w});class u{constructor(e={}){this.config={animateStats:!0,enableSearch:!0,enableFilters:!0,enableSmoothScroll:!0,enableScrollEffects:!0,...e},this.init()}init(){this.config.enableScrollEffects&&this.initScrollEffects(),this.config.enableSmoothScroll&&this.initSmoothScroll(),this.config.animateStats&&this.initStatsAnimation(),this.config.enableFilters&&this.initFilters(),this.config.enableSearch&&this.initSearch(),this.initMobileMenu(),this.initAccessibility()}initScrollEffects(){const e=document.getElementById("main-nav");if(!e)return;let s=0;window.addEventListener("scroll",()=>{const t=window.pageYOffset;t>100?e.classList.add("scrolled"):e.classList.remove("scrolled"),s=t},{passive:!0})}initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",s=>{s.preventDefault();const t=e.getAttribute("href");if(t==="#")return;const n=document.querySelector(t);if(n){const i=n.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:i,behavior:"smooth"})}})})}initStatsAnimation(){const e={threshold:.5,rootMargin:"0px 0px -10% 0px"},s=new IntersectionObserver(o=>{o.forEach(i=>{i.isIntersecting&&(i.target.querySelectorAll("[data-target]").forEach(r=>this.animateStat(r)),s.unobserve(i.target))})},e);document.querySelectorAll(".hero-stats").forEach(o=>s.observe(o)),document.querySelectorAll(".progress-section").forEach(o=>s.observe(o))}animateStat(e){const s=parseInt(e.dataset.target);if(isNaN(s))return;const t=2e3,n=60,o=s/n;let i=0,a=0;const r=setInterval(()=>{i+=o,a++,a>=n?(e.textContent=s+(e.dataset.suffix||""),clearInterval(r)):e.textContent=Math.floor(i)+(e.dataset.suffix||"")},t/n)}initFilters(){const e=document.querySelectorAll(".filter-button");e.length!==0&&e.forEach(s=>{s.addEventListener("click",()=>{const t=s.dataset.filter;e.forEach(n=>n.classList.remove("active")),s.classList.add("active"),this.filterItems(t),document.dispatchEvent(new CustomEvent("hubFilterChange",{detail:{filter:t}}))})})}filterItems(e){document.querySelectorAll("[data-category]").forEach(t=>{e==="all"?(t.style.display="",this.fadeIn(t)):(t.dataset.category?.split(" ")||[]).includes(e)?(t.style.display="",this.fadeIn(t)):this.fadeOut(t).then(()=>{t.style.display="none"})})}initSearch(){const e=document.getElementById("searchInput"),s=document.querySelector(".search-button");if(!e)return;s?.addEventListener("click",()=>this.performSearch()),e.addEventListener("keypress",n=>{n.key==="Enter"&&(n.preventDefault(),this.performSearch())});let t;e.addEventListener("input",()=>{clearTimeout(t),t=setTimeout(()=>this.performSearch(),300)}),this.initSearchClear()}initSearchClear(){const e=document.getElementById("clearSearch"),s=document.getElementById("searchInput"),t=document.getElementById("searchResults"),n=document.getElementById("searchResultsCount");e&&s&&e.addEventListener("click",()=>{s.value="",e.style.display="none",t&&(t.innerHTML=""),n&&(n.style.display="none"),s.focus()})}async performSearch(){const s=document.getElementById("searchInput")?.value.toLowerCase().trim()||"",t=document.getElementById("searchResults"),n=document.getElementById("searchResultsCount"),o=document.getElementById("clearSearch");if(o&&(o.style.display=s?"flex":"none"),!s){t&&(t.innerHTML=""),n&&(n.style.display="none");return}t&&(t.innerHTML='<div class="search-loading"></div>');try{let i=[];window.hub&&window.hub.loader?(i=await window.hub.loader.searchCharacters(s),this.displayCharacterResults(i,s,t,n)):(document.querySelectorAll(".study-card, .character-card, .featured-card").forEach(r=>{const l=r.textContent.toLowerCase();l.includes(s)&&i.push({element:r.cloneNode(!0),relevance:this.calculateRelevance(l,s)})}),i.sort((r,l)=>l.relevance-r.relevance),this.displaySearchResults(i,s,t))}catch(i){console.error("Search error:",i),t&&(t.innerHTML=`
                    <div class="empty-state">
                        <div class="empty-state-icon">\u26A0\uFE0F</div>
                        <div class="empty-state-text">Search Error</div>
                        <div class="empty-state-subtext">Please try again</div>
                    </div>
                `)}}displayCharacterResults(e,s,t,n){if(t)if(e.length>0){n&&(n.querySelector(".results-number").textContent=e.length,n.style.display="block");let o=`
                <div class="section-header">
                    <h3 class="section-title">Search Results</h3>
                    <p class="section-subtitle">${e.length} result${e.length!==1?"s":""} for "${s}"</p>
                </div>
                <div class="studies-list cards-grid">
            `;e.forEach(i=>{const a=i.book?.id||"unknown",r=i.profilePath||"#",l=i.hebrew?`<span class="hebrew">${i.hebrew}</span>`:"",h=(i.tags||[]).map(f=>`<span class="tag ${f.toLowerCase().includes("unnamed")?"group":""}">${f}</span>`).join(""),m=Array.isArray(i.references)?i.references.join(", "):"";o+=`
                    <article class="study-card">
                        <a href="${r}" class="study-card-link">
                            <div class="study-card-header">
                                <h4 class="study-card-title">
                                    ${i.name} ${l}
                                </h4>
                                <div class="study-card-tags">${h}</div>
                            </div>
                            <div class="study-card-body">
                                <p class="study-card-meta">${i.meaning||""} \u2022 ${m}</p>
                                <p class="study-card-desc">${i.summary||""}</p>
                                <p class="study-card-meta" style="margin-top: 0.5rem;">
                                    <strong>Book:</strong> ${i.book?.name||"Unknown"}
                                </p>
                            </div>
                            <div class="study-card-arrow">
                                <svg viewBox="0 0 24 24">
                                    <path d="M9 5l7 7-7 7" stroke="currentColor" stroke-width="2" fill="none"/>
                                </svg>
                            </div>
                        </a>
                    </article>
                `}),o+="</div>",t.innerHTML=o}else n&&(n.style.display="none"),t.innerHTML=`
                <div class="empty-state">
                    <div class="empty-state-icon">\u{1F50D}</div>
                    <div class="empty-state-text">No Results Found</div>
                    <div class="empty-state-subtext">Try searching for different keywords</div>
                </div>
            `}calculateRelevance(e,s){let t=0;const n=e.toLowerCase(),o=s.toLowerCase();return n===o&&(t+=100),n.startsWith(o)&&(t+=50),n.includes(o)&&(t+=25),new RegExp(`\\b${o}\\b`,"i").test(e)&&(t+=30),t}displaySearchResults(e,s,t){t&&(e.length>0?t.innerHTML=`
                <div class="section-header">
                    <h3 class="section-title">Search Results</h3>
                    <p class="section-subtitle">${e.length} results found for "${s}"</p>
                </div>
                <div class="studies-list">
                    ${e.slice(0,20).map(n=>n.element.outerHTML).join("")}
                </div>
            `:t.innerHTML=`
                <div class="empty-state">
                    <div class="empty-state-icon">\u{1F50D}</div>
                    <div class="empty-state-text">No Results Found</div>
                    <div class="empty-state-subtext">Try searching for different keywords</div>
                </div>
            `,t.scrollIntoView({behavior:"smooth",block:"nearest"}))}initMobileMenu(){document.addEventListener("click",e=>{const s=document.getElementById("main-nav"),t=document.querySelector(".mobile-menu-toggle"),n=document.querySelector(".nav-links");!s?.contains(e.target)&&t?.classList.contains("active")&&(t.classList.remove("active"),n?.classList.remove("active"))})}initAccessibility(){const e=document.createElement("a");e.href="#main-content",e.className="skip-link",e.textContent="Skip to main content",document.body.insertBefore(e,document.body.firstChild),document.addEventListener("keydown",s=>{if(s.key==="Escape"){const t=document.querySelector(".mobile-menu-toggle"),n=document.querySelector(".nav-links");t?.classList.contains("active")&&(t.classList.remove("active"),n?.classList.remove("active")),document.dispatchEvent(new CustomEvent("escapePressed"))}}),this.initDropdownAccessibility()}initDropdownAccessibility(){document.querySelectorAll(".dropdown").forEach(s=>{const t=s.querySelector(".dropdown-toggle"),n=s.querySelector(".dropdown-content"),o=n?.querySelectorAll("a");!t||!n||!o||(t.addEventListener("keydown",i=>{if(i.key==="Enter"||i.key===" "){i.preventDefault();const a=n.style.display==="block";n.style.display=a?"none":"block",!a&&o.length>0&&o[0].focus()}}),o.forEach((i,a)=>{i.addEventListener("keydown",r=>{r.key==="ArrowDown"?(r.preventDefault(),(o[a+1]||o[0]).focus()):r.key==="ArrowUp"?(r.preventDefault(),(o[a-1]||o[o.length-1]).focus()):r.key==="Escape"&&(n.style.display="none",t.focus())})}))})}fadeIn(e,s=300){return new Promise(t=>{e.style.opacity="0",e.style.transition=`opacity ${s}ms ease`,requestAnimationFrame(()=>{e.style.opacity="1",setTimeout(t,s)})})}fadeOut(e,s=300){return new Promise(t=>{e.style.transition=`opacity ${s}ms ease`,e.style.opacity="0",setTimeout(t,s)})}debounce(e,s){let t;return function(...o){const i=()=>{clearTimeout(t),e(...o)};clearTimeout(t),t=setTimeout(i,s)}}throttle(e,s){let t;return function(...n){t||(e.apply(this,n),t=!0,setTimeout(()=>t=!1,s))}}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.hubCommon=new u}):window.hubCommon=new u;var w=u;return b(E);})();
//# sourceMappingURL=hub-common.min.js.map
