var hub_bundle=(()=>{var $=Object.defineProperty;var M=(d,e)=>()=>(d&&(e=d(d=0)),e);var T=(d,e)=>{for(var t in e)$(d,t,{get:e[t],enumerable:!0})};var w={};T(w,{default:()=>D});var v,D,k=M(()=>{v=class{constructor(e={}){this.baseUrl=e.baseUrl||"",this.filterGender=e.filterGender||null,this.manifest=null,this.cache=new Map,this.initialized=!1,this.embeddedData=this.getEmbeddedData()}async initialize(){if(this.initialized)return this.manifest;try{let e=`${this.baseUrl}/assets/data/manifest.json`,t=await fetch(e);return t.ok?(this.manifest=await t.json(),console.log("\u2713 Loaded manifest from server")):(this.manifest=this.getDefaultManifest(),console.log("\u2713 Using default manifest")),this.initialized=!0,this.manifest}catch(e){return console.warn("Error loading manifest, using default:",e.message),this.manifest=this.getDefaultManifest(),this.initialized=!0,this.manifest}}getDefaultManifest(){return{version:"1.0",books:{tanakh:{torah:["genesis","exodus","leviticus","numbers","deuteronomy"],neviimFormer:["joshua","judges","samuel","kings"],neviimLatter:["isaiah","jeremiah","ezekiel"],ketuvim:["psalms","proverbs","job","ruth","esther"]}}}}async loadBook(e){let t=e.replace(/[12]$/,"");if(console.log(`LoadBook called for: ${e}, normalized to: ${t}`),this.cache.has(t)){console.log(`Returning ${t} from cache`);let a=this.filterData(this.cache.get(t));return this.forceDisplayUpdate(),a}if(this.embeddedData[t]){let a=this.embeddedData[t];return this.cache.set(t,a),console.log(`\u2713 Loaded ${t} from embedded data with ${a.characters?.length||0} characters`),this.forceDisplayUpdate(),this.filterData(a)}try{let a=`${this.baseUrl}/assets/data/books/${t}.json`;console.log(`Attempting to fetch: ${a}`);let s=await fetch(a);if(!s.ok)throw new Error(`HTTP ${s.status}`);let i=await s.json();return this.cache.set(t,i),console.log(`\u2713 Loaded ${t} from server with ${i.characters?.length||0} characters`),this.filterData(i)}catch(a){return console.warn(`Could not load ${t} from server: ${a.message}`),{book:{id:t,name:this.getBookName(t),characterCount:0},characters:[]}}}getBookName(e){return{genesis:"Genesis",exodus:"Exodus",leviticus:"Leviticus",numbers:"Numbers",deuteronomy:"Deuteronomy",joshua:"Joshua",judges:"Judges",ruth:"Ruth",samuel:"1-2 Samuel",kings:"1-2 Kings",chronicles:"1-2 Chronicles",ezra:"Ezra",nehemiah:"Nehemiah",esther:"Esther",job:"Job",psalms:"Psalms",proverbs:"Proverbs",ecclesiastes:"Ecclesiastes","song-of-songs":"Song of Songs",isaiah:"Isaiah",jeremiah:"Jeremiah",lamentations:"Lamentations",ezekiel:"Ezekiel",daniel:"Daniel"}[e]||e.charAt(0).toUpperCase()+e.slice(1)}filterData(e){return!this.filterGender||!e.characters?e:{...e,characters:e.characters.filter(t=>t.gender===this.filterGender)}}async searchCharacters(e){let t=await this.getAllCharacters(),a=e.toLowerCase();return t.filter(s=>s.name?.toLowerCase().includes(a)||s.hebrew?.includes(e)||s.meaning?.toLowerCase().includes(a)||s.summary?.toLowerCase().includes(a)||s.tags?.some(i=>i.toLowerCase().includes(a)))}async getAllCharacters(){let e=[],t=Object.keys(this.embeddedData);for(let a of t){let s=await this.loadBook(a);s.characters&&e.push(...s.characters.map(i=>({...i,book:s.book})))}return e}getEmbeddedData(){return{kings:{book:{id:"kings",name:"1-2 Kings",hebrew:"\u05DE\u05B0\u05DC\u05B8\u05DB\u05B4\u05D9\u05DD",hebrewTranslit:"M'lakhim"},characters:[{id:"bathsheba-kings",name:"Bathsheba",hebrew:"\u05D1\u05B7\u05BC\u05EA\u05BE\u05E9\u05B6\u05C1\u05D1\u05B7\u05E2",gender:"female",profilePath:"/studies/characters/kings/bathsheba.html",references:["1 Kings 1:11-31","1 Kings 2:13-25"],meaning:"Daughter of oath/seven",summary:"David's wife, Solomon's mother, secures throne for her son",tags:["Queen Mother","Influence","Succession"],hasProfile:!1},{id:"jezebel",name:"Jezebel",hebrew:"\u05D0\u05B4\u05D9\u05D6\u05B6\u05D1\u05B6\u05DC",gender:"female",profilePath:"/studies/characters/kings/jezebel.html",references:["1 Kings 16:31","1 Kings 18:4-19","1 Kings 19:1-2","1 Kings 21:1-25","2 Kings 9:7-37"],meaning:"Where is the prince?",summary:"Ahab's wife, promoted Baal worship, enemy of Elijah, killed by Jehu's command",tags:["Queen","Idolatry","Persecution","Power","Judgment"],hasProfile:!0,multiPage:!0},{id:"widow-zarephath",name:"Widow of Zarephath",hebrew:"\u05D0\u05B7\u05DC\u05B0\u05DE\u05B8\u05E0\u05B8\u05D4 \u05E6\u05B8\u05E8\u05B0\u05E4\u05B7\u05EA",gender:"female",profilePath:"/studies/characters/kings/widow-zarephath.html",references:["1 Kings 17:7-24"],meaning:"Widow of refining place",summary:"Fed Elijah during famine, son raised from dead",tags:["Widow","Faith","Miracle","Hospitality","Resurrection"],hasProfile:!1},{id:"athaliah",name:"Athaliah",hebrew:"\u05E2\u05B2\u05EA\u05B7\u05DC\u05B0\u05D9\u05B8\u05D4",gender:"female",profilePath:"/studies/characters/kings/athaliah.html",references:["2 Kings 8:18, 26","2 Kings 11:1-20"],meaning:"Yahweh has shown his might",summary:"Daughter of Ahab/Jezebel, usurper queen of Judah, killed royal seed",tags:["Queen","Usurper","Violence","Judgment"],hasProfile:!0},{id:"jehosheba",name:"Jehosheba",hebrew:"\u05D9\u05B0\u05D4\u05D5\u05B9\u05E9\u05B6\u05C1\u05D1\u05B7\u05E2",gender:"female",profilePath:"/studies/characters/kings/jehosheba.html",references:["2 Kings 11:2-3"],meaning:"Yahweh is an oath",summary:"Daughter of King Joram, saved baby Joash from Athaliah",tags:["Princess","Rescuer","Courage","Covenant keeper"],hasProfile:!0},{id:"shunammite-woman",name:"Shunammite Woman",hebrew:"\u05D4\u05B7\u05E9\u05BC\u05C1\u05D5\u05BC\u05E0\u05B7\u05DE\u05B4\u05BC\u05D9\u05EA",gender:"female",profilePath:"/studies/characters/kings/shunammite-woman.html",references:["2 Kings 4:8-37","2 Kings 8:1-6"],meaning:"Woman from Shunem",summary:"Wealthy patron of Elisha, son raised from dead",tags:["Patron","Faith","Hospitality","Resurrection","Mother"],hasProfile:!0,hasChiasm:!0},{id:"servant-girl-naaman",name:"Naaman's Wife's Servant Girl",hebrew:"\u05E0\u05B7\u05E2\u05B2\u05E8\u05B8\u05D4 \u05E7\u05B0\u05D8\u05B7\u05E0\u05B8\u05BC\u05D4",gender:"female",profilePath:"/studies/characters/kings/servant-girl-naaman.html",references:["2 Kings 5:2-4"],meaning:"Young girl/little maiden",summary:"Israelite captive who directed Naaman to Elisha for healing",tags:["Captive","Child","Faith","Witness","Forgiveness"],hasProfile:!0},{id:"huldah",name:"Huldah",hebrew:"\u05D7\u05BB\u05DC\u05B0\u05D3\u05B8\u05BC\u05D4",gender:"female",profilePath:"/studies/characters/kings/huldah.html",references:["2 Kings 22:14-20"],meaning:"Weasel",summary:"Prophetess consulted by King Josiah about the Book of the Law",tags:["Prophetess","Authority","Reform","Judgment"],hasProfile:!1},{id:"elijah",name:"Elijah",hebrew:"\u05D0\u05B5\u05DC\u05B4\u05D9\u05B8\u05BC\u05D4\u05D5\u05BC",gender:"male",profilePath:"/studies/characters/kings/elijah.html",references:["1 Kings 17:1-24","1 Kings 18:1-46","1 Kings 19:1-21","1 Kings 21:17-29","2 Kings 1:1-18","2 Kings 2:1-11"],meaning:"My God is Yahweh",summary:"Greatest prophet of northern kingdom, confronted Ahab and Jezebel, taken to heaven in whirlwind",tags:["Prophet","Miracle Worker","Mount Carmel","Translation"],hasProfile:!0,multiPage:!0},{id:"elisha",name:"Elisha",hebrew:"\u05D0\u05B1\u05DC\u05B4\u05D9\u05E9\u05B8\u05C1\u05E2",gender:"male",profilePath:"/studies/characters/kings/elisha.html",references:["1 Kings 19:16-21","2 Kings 2:1-25","2 Kings 4:1-44","2 Kings 5:1-27","2 Kings 6:1-33","2 Kings 13:14-21"],meaning:"God is salvation",summary:"Elijah's successor, performed many miracles and helped common people",tags:["Prophet","Miracle Worker","Successor","Double Portion"],hasProfile:!0,multiPage:!0},{id:"jehu",name:"Jehu",hebrew:"\u05D9\u05B5\u05D4\u05D5\u05BC\u05D0",gender:"male",profilePath:"/studies/characters/kings/jehu.html",references:["2 Kings 9:1-37","2 Kings 10:1-36"],meaning:"Yahweh is he",summary:"Anointed king who destroyed Ahab's dynasty and killed Jezebel",tags:["King","Reformer","Divine Agent","Judgment"],hasProfile:!0},{id:"hezekiah",name:"Hezekiah",hebrew:"\u05D7\u05B4\u05D6\u05B0\u05E7\u05B4\u05D9\u05B8\u05BC\u05D4\u05D5\u05BC",gender:"male",profilePath:"/studies/characters/kings/hezekiah.html",references:["2 Kings 18:1-37","2 Kings 19:1-37","2 Kings 20:1-21"],meaning:"Yahweh strengthens",summary:"Righteous king who trusted God against Assyrian invasion",tags:["King","Reformer","Faith","Miraculous Deliverance"],hasProfile:!0,multiPage:!0},{id:"josiah",name:"Josiah",hebrew:"\u05D9\u05B9\u05D0\u05E9\u05B4\u05C1\u05D9\u05B8\u05BC\u05D4\u05D5\u05BC",gender:"male",profilePath:"/studies/characters/kings/josiah.html",references:["2 Kings 22:1-20","2 Kings 23:1-30"],meaning:"Yahweh supports",summary:"Great reformer king who discovered the Book of the Law",tags:["King","Reformer","Law Discovery","Passover Revival"],hasProfile:!0,multiPage:!0},{id:"naaman",name:"Naaman",hebrew:"\u05E0\u05B7\u05E2\u05B2\u05DE\u05B8\u05DF",gender:"male",profilePath:"/studies/characters/kings/naaman.html",references:["2 Kings 5:1-27"],meaning:"Pleasant",summary:"Syrian commander healed of leprosy by following Elisha's instructions",tags:["Syrian","Military Leader","Healing","Conversion"],hasProfile:!0}]},samuel:{book:{id:"samuel",name:"1-2 Samuel",hebrew:"\u05E9\u05B0\u05C1\u05DE\u05D5\u05BC\u05D0\u05B5\u05DC",hebrewTranslit:"Sh'muel"},characters:[{id:"hannah",name:"Hannah",hebrew:"\u05D7\u05B7\u05E0\u05B8\u05BC\u05D4",gender:"female",profilePath:"/studies/characters/samuel/hannah.html",references:["1 Sam 1:1-28","1 Sam 2:1-11","1 Sam 2:18-21"],meaning:"Grace, favor",summary:"Barren woman whose fervent prayer led to Samuel's birth. Her song of praise became a model for the Magnificat.",tags:["Mother","Worshipper","Prayer Warrior","Barren Woman","Prophetess"],hasProfile:!0,multiPage:!0,hasSong:!0,songPath:"/studies/women/song-of-songs/song-of-hannah.html"},{id:"peninnah",name:"Peninnah",hebrew:"\u05E4\u05B0\u05BC\u05E0\u05B4\u05E0\u05B8\u05BC\u05D4",gender:"female",profilePath:"/studies/characters/samuel/peninnah.html",references:["1 Sam 1:2-7"],meaning:"Pearl, coral",summary:"Elkanah's second wife who had children and provoked Hannah's barrenness",tags:["Rival Wife","Mother","Provocation"],hasProfile:!0},{id:"medium-endor",name:"Medium of En-dor",hebrew:"\u05D1\u05B7\u05BC\u05E2\u05B2\u05DC\u05B7\u05EA\u05BE\u05D0\u05D5\u05B9\u05D1",gender:"female",profilePath:"/studies/characters/samuel/medium-endor.html",references:["1 Sam 28:3-25"],meaning:"Mistress of the spirit",summary:"Necromancer consulted by Saul who summoned Samuel's spirit before his final battle",tags:["Occult","Necromancer","Forbidden Practice"],hasProfile:!0},{id:"abigail",name:"Abigail",hebrew:"\u05D0\u05B2\u05D1\u05B4\u05D9\u05D2\u05B7\u05D9\u05B4\u05DC",gender:"female",profilePath:"/studies/characters/samuel/abigail.html",references:["1 Sam 25:1-44","2 Sam 2:2","2 Sam 3:3"],meaning:"My father's joy",summary:"Wise woman who prevented David from sinning by interceding for her foolish husband Nabal",tags:["Wise Woman","Intercessor","David's Wife","Peacemaker"],hasProfile:!0,multiPage:!0},{id:"michal",name:"Michal",hebrew:"\u05DE\u05B4\u05D9\u05DB\u05B7\u05DC",gender:"female",profilePath:"/studies/characters/samuel/michal.html",references:["1 Sam 14:49","1 Sam 18:17-29","1 Sam 19:11-17","1 Sam 25:44"],meaning:"Who is like God?",summary:"Saul's daughter who loved David, helped him escape, later given to another man",tags:["Princess","David's Wife","Love","Protector"],hasProfile:!0},{id:"bathsheba",name:"Bathsheba",hebrew:"\u05D1\u05B7\u05BC\u05EA\u05BE\u05E9\u05B6\u05C1\u05D1\u05B7\u05E2",gender:"female",profilePath:"/studies/characters/samuel/bathsheba.html",references:["2 Sam 11:1-27","2 Sam 12:15-25"],meaning:"Daughter of oath/seven",summary:"Woman David took in adultery, became his wife and mother of Solomon",tags:["David's Wife","Adultery","Solomon's Mother","Tragedy"],hasProfile:!0,multiPage:!0},{id:"tamar-david-daughter",name:"Tamar",hebrew:"\u05EA\u05B8\u05BC\u05DE\u05B8\u05E8",gender:"female",profilePath:"/studies/characters/samuel/tamar-daughter-of-david.html",references:["2 Sam 13:1-22"],meaning:"Palm tree",summary:"David's daughter raped by her half-brother Amnon, avenged by Absalom",tags:["Princess","Victim","Amnon's Sister","Beautiful"],hasProfile:!0},{id:"rizpah",name:"Rizpah",hebrew:"\u05E8\u05B4\u05E6\u05B0\u05E4\u05B8\u05BC\u05D4",gender:"female",profilePath:"/studies/characters/samuel/rizpah.html",references:["2 Sam 3:7","2 Sam 21:8-11"],meaning:"Hot stone",summary:"Saul's concubine who protected her sons' bodies after execution",tags:["Concubine","Mother","Protector"],hasProfile:!0},{id:"woman-of-abel-beth-maacah",name:"Woman of Abel Beth-maacah",hebrew:"\u05D0\u05B4\u05E9\u05B8\u05BC\u05C1\u05D4 \u05D7\u05B2\u05DB\u05B8\u05DE\u05B8\u05D4",gender:"female",profilePath:"/studies/characters/samuel/woman-of-abel-beth-maacah.html",references:["2 Sam 20:15-22"],meaning:"Wise woman",summary:"Wise woman who saved her city by handing over Sheba's head to Joab",tags:["Wise Woman","City Savior","Negotiator"],hasProfile:!0},{id:"ahinoam-jezreel",name:"Ahinoam of Jezreel",hebrew:"\u05D0\u05B2\u05D7\u05B4\u05D9\u05E0\u05B9\u05E2\u05B7\u05DD",gender:"female",profilePath:"/studies/characters/samuel/ahinoam-jezreel.html",references:["1 Sam 25:43","1 Sam 27:3","1 Sam 30:5"],meaning:"My brother is pleasant",summary:"One of David's wives, taken captive by Amalekites and rescued",tags:["David's Wife","Captive","Jezreel"],hasProfile:!1},{id:"merab",name:"Merab",hebrew:"\u05DE\u05B5\u05E8\u05B7\u05D1",gender:"female",profilePath:"/studies/characters/samuel/merab.html",references:["1 Sam 14:49","1 Sam 18:17-19"],meaning:"Increase",summary:"Saul's eldest daughter, promised to David but given to Adriel",tags:["Princess","Saul's Daughter"],hasProfile:!0},{id:"tamar-absalom-daughter",name:"Tamar (Absalom's daughter)",hebrew:"\u05EA\u05B8\u05BC\u05DE\u05B8\u05E8",gender:"female",profilePath:"/studies/characters/samuel/tamar-daughter-of-absalom.html",references:["2 Sam 14:27"],meaning:"Palm tree",summary:"Absalom's beautiful daughter, named after his sister",tags:["Princess","Beautiful","Absalom's Daughter"],hasProfile:!0},{id:"samuel",name:"Samuel",hebrew:"\u05E9\u05B0\u05C1\u05DE\u05D5\u05BC\u05D0\u05B5\u05DC",gender:"male",profilePath:"/studies/characters/samuel/samuel.html",references:["1 Sam 1:20","1 Sam 3:1-21","1 Sam 7:3-17","1 Sam 8:1-22","1 Sam 15:10-35","1 Sam 16:1-13"],meaning:"Name of God/Asked of God",summary:"Last judge and first prophet, anointed both Saul and David as kings",tags:["Prophet","Judge","Priest","Kingmaker","Nazarite"],hasProfile:!0,multiPage:!0},{id:"saul",name:"Saul",hebrew:"\u05E9\u05B8\u05C1\u05D0\u05D5\u05BC\u05DC",gender:"male",profilePath:"/studies/characters/samuel/saul.html",references:["1 Sam 9:1-27","1 Sam 10:1-27","1 Sam 11:1-15","1 Sam 13:1-23","1 Sam 15:1-35","1 Sam 28:3-25","1 Sam 31:1-13"],meaning:"Asked for/Requested",summary:"First king of Israel, chosen by people's demand, rejected by God for disobedience",tags:["King","Tragic Figure","Disobedient","Rejected"],hasProfile:!1},{id:"david",name:"David",hebrew:"\u05D3\u05B8\u05BC\u05D5\u05B4\u05D3",gender:"male",profilePath:"/studies/characters/samuel/david.html",references:["1 Sam 16:1-23","1 Sam 17:1-58","2 Sam 1:1-24:25"],meaning:"Beloved",summary:"Shepherd boy anointed as king, giant-killer, musician, man after God's own heart who fell into sin",tags:["King","Shepherd","Musician","Giant-killer","Anointed","Adulterer","Repentant"],hasProfile:!1},{id:"jonathan",name:"Jonathan",hebrew:"\u05D9\u05B0\u05D4\u05D5\u05B9\u05E0\u05B8\u05EA\u05B8\u05DF",gender:"male",profilePath:"/studies/characters/samuel/jonathan.html",references:["1 Sam 13:2-3","1 Sam 14:1-46","1 Sam 18:1-4","1 Sam 19:1-7","1 Sam 20:1-42","1 Sam 23:16-18"],meaning:"Yahweh has given",summary:"Saul's son and David's loyal friend who chose friendship over succession",tags:["Prince","Friend","Loyal","Warrior","Covenant"],hasProfile:!1},{id:"goliath",name:"Goliath",hebrew:"\u05D2\u05B8\u05BC\u05DC\u05B0\u05D9\u05B8\u05EA",gender:"male",profilePath:"/studies/characters/samuel/goliath.html",references:["1 Sam 17:1-58"],meaning:"Exile/Uncovered",summary:"Philistine giant champion defeated by David with a sling and stone",tags:["Giant","Philistine","Enemy","Champion"],hasProfile:!1},{id:"absalom",name:"Absalom",hebrew:"\u05D0\u05B7\u05D1\u05B0\u05E9\u05B8\u05C1\u05DC\u05D5\u05B9\u05DD",gender:"male",profilePath:"/studies/characters/samuel/absalom.html",references:["2 Sam 13:1-39","2 Sam 14:1-33","2 Sam 15:1-37","2 Sam 16:1-23","2 Sam 17:1-29","2 Sam 18:1-33"],meaning:"Father is peace",summary:"David's third son who rebelled against his father and was killed by Joab",tags:["Prince","Rebel","Avenger","Beautiful","Dead"],hasProfile:!1},{id:"nathan-prophet",name:"Nathan the Prophet",hebrew:"\u05E0\u05B8\u05EA\u05B8\u05DF",gender:"male",profilePath:"/studies/characters/samuel/nathan.html",references:["2 Sam 7:1-29","2 Sam 12:1-25"],meaning:"Gift",summary:"Prophet who gave David the covenant promises and confronted him about his sin with Bathsheba",tags:["Prophet","Confronter","Covenant Bearer"],hasProfile:!1}]}}}forceDisplayUpdate(){setTimeout(()=>{let e=document.getElementById("book-data-section"),t=document.getElementById("book-data"),a=document.getElementById("book-loading");e&&t&&a&&(e.style.display="block",a.style.display="none",t.style.display="block",e.scrollIntoView({behavior:"smooth",block:"nearest"}))},100)}clearCache(){this.cache.clear()}},D=v});var g=class{constructor(e={}){this.type=e.type||"characters",this.filterGender=e.filterGender||null,this.loader=null,this.currentBook=null,this.initialized=!1,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.init()):this.init()}async init(){if(!this.initialized)try{let{default:e}=await Promise.resolve().then(()=>(k(),w));this.loader=new e({filterGender:this.filterGender}),await this.loader.initialize(),this.setupEventListeners(),this.animateStats(),this.loadFeaturedCharacters(),this.setupMobileMenu(),this.setupScrollEffects(),this.initialized=!0}catch(e){console.error("Failed to initialize hub:",e),this.showError("Failed to initialize. Please refresh the page.")}}setupEventListeners(){document.querySelectorAll(".main-tab-button").forEach(e=>{e.addEventListener("click",t=>this.handleMainTabClick(t))}),document.querySelectorAll(".sub-tab-button").forEach(e=>{e.addEventListener("click",t=>this.handleSubTabClick(t))}),document.querySelectorAll("tr[data-book]").forEach(e=>{e.addEventListener("click",t=>this.handleBookClick(t))}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>this.handleAnchorClick(t))})}handleMainTabClick(e){let t=e.currentTarget,a=t.dataset.section;document.querySelectorAll(".main-tab-button").forEach(i=>{i.classList.remove("active")}),t.classList.add("active"),document.querySelectorAll(".tab-content").forEach(i=>{i.classList.remove("active")});let s=document.getElementById(`${a}-content`);s&&s.classList.add("active")}handleSubTabClick(e){let t=e.currentTarget,a=t.dataset.category;t.closest(".sub-tabs-nav").querySelectorAll(".sub-tab-button").forEach(n=>{n.classList.remove("active")}),t.classList.add("active"),document.querySelectorAll(".sub-tab-content").forEach(n=>{n.classList.remove("active")});let i=document.getElementById(`${a}-category`);i&&i.classList.add("active")}async handleBookClick(e){let a=e.currentTarget.dataset.book;a&&(this.currentBook===a&&this.isLoading||(this.currentBook=a,await this.loadBookCharacters(a)))}handleAnchorClick(e){e.preventDefault();let t=document.querySelector(e.currentTarget.getAttribute("href"));if(t){let a=t.offsetTop-100;window.scrollTo({top:a,behavior:"smooth"})}}async loadBookCharacters(e){let t=document.getElementById("book-data-section"),a=document.getElementById("book-loading"),s=document.getElementById("book-data");if(!t||!a||!s){console.error("Required elements not found");return}t.style.display="block",a.style.display="flex",s.style.display="none",this.isLoading=!0;try{let i=await this.loader.loadBook(e);if(!i||!i.characters||i.characters.length===0){let n="No Characters Found",l="This book doesn't have any character profiles yet";this.filterGender==="female"?(n="No Women Recorded",l="This book does not contain any women profiles"):this.filterGender==="male"&&(n="No Men Recorded",l="This book does not contain any men profiles"),s.innerHTML=`
                    <div class="empty-state">
                        <div class="empty-state-icon">\u{1F4DA}</div>
                        <div class="empty-state-text">${n}</div>
                        <div class="empty-state-subtext">${l}</div>
                    </div>
                `}else this.renderCharacterCards(i,s);a.style.display="none",s.style.display="block",setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"nearest"})},100)}catch(i){console.error("Error loading book:",i),s.innerHTML=`
                <div class="empty-state">
                    <div class="empty-state-icon">\u26A0\uFE0F</div>
                    <div class="empty-state-text">Failed to Load Characters</div>
                    <div class="empty-state-subtext">Please try again or refresh the page</div>
                </div>
            `,a.style.display="none",s.style.display="block"}finally{this.isLoading=!1}}renderCharacterCards(e,t){let a=e.book?.name||"Book",s=e.book?.id||"book",i="";if(this.filterGender==="female"){let n=e.characters.filter(l=>l.gender==="female");if(n.length===0)i=`
                    <div class="empty-state">
                        <div class="empty-state-icon">\u{1F4D6}</div>
                        <div class="empty-state-text">No Women in ${a}</div>
                        <div class="empty-state-subtext">This book does not contain any women profiles</div>
                    </div>
                `;else{let l=n.filter(r=>!r.tags?.includes("Unnamed")),o=n.filter(r=>r.tags?.includes("Unnamed"));i=`<h3 class="section-title">Women in ${a}</h3>`,l.length>0&&(i+=`
                        <div class="section-header">
                            <h4 class="section-title">Named Women</h4>
                            <p class="section-subtitle">${l.length} women with recorded names</p>
                        </div>
                        <div class="cards-grid">
                            ${l.map(r=>this.createCharacterCard(r,s)).join("")}
                        </div>
                    `),o.length>0&&(i+=`
                        <div class="section-header">
                            <h4 class="section-title">Unnamed Women</h4>
                            <p class="section-subtitle">${o.length} women identified by role or relationship</p>
                        </div>
                        <div class="cards-grid">
                            ${o.map(r=>this.createCharacterCard(r,s)).join("")}
                        </div>
                    `)}}else if(this.filterGender==="male"){let n=e.characters.filter(l=>l.gender==="male");i=`<h3 class="section-title">Men in ${a}</h3>`,n.length>0?i+=`
                    <div class="cards-grid">
                        ${n.map(l=>this.createCharacterCard(l,s)).join("")}
                    </div>
                `:i=`
                    <div class="empty-state">
                        <div class="empty-state-icon">\u{1F4D6}</div>
                        <div class="empty-state-text">No Men in ${a}</div>
                        <div class="empty-state-subtext">This book does not contain any men profiles</div>
                    </div>
                `}else{let n=e.characters.filter(r=>r.gender==="male"),l=e.characters.filter(r=>r.gender==="female"),o=e.characters.filter(r=>!r.gender||r.gender==="unknown");i=`<h3 class="section-title">${a} Characters</h3>`,n.length>0&&(i+=`
                    <div class="section-header">
                        <h4 class="section-title">Men</h4>
                        <p class="section-subtitle">${n.length} male character${n.length>1?"s":""}</p>
                    </div>
                    <div class="cards-grid">
                        ${n.map(r=>this.createCharacterCard(r,s)).join("")}
                    </div>
                `),l.length>0&&(i+=`
                    <div class="section-header">
                        <h4 class="section-title">Women</h4>
                        <p class="section-subtitle">${l.length} female character${l.length>1?"s":""}</p>
                    </div>
                    <div class="cards-grid">
                        ${l.map(r=>this.createCharacterCard(r,s)).join("")}
                    </div>
                `),o.length>0&&(i+=`
                    <div class="section-header">
                        <h4 class="section-title">Other Characters</h4>
                        <p class="section-subtitle">${o.length} character${o.length>1?"s":""}</p>
                    </div>
                    <div class="cards-grid">
                        ${o.map(r=>this.createCharacterCard(r,s)).join("")}
                    </div>
                `)}t.innerHTML=i,this.animateCardEntrance()}buildCharacterPath(e,t){return e.profilePath?e.profilePath:e.multiPage?`/studies/characters/${t}/${e.id}/${e.id}.html`:`/studies/characters/${t}/${e.id}.html`}createCharacterCard(e,t){let a=e.hebrew?`<span class="hebrew">${e.hebrew}</span>`:"",s=(e.tags||[]).map(r=>`<span class="tag ${this.getTagClass(r)}">${r}</span>`).join(""),i=Array.isArray(e.references)?e.references.join(", "):e.references||"",n=e.meaning?`${e.meaning} \u2022 ${i}`:i,l=this.buildCharacterPath(e,t),o=e.hasSong&&e.songPath?`<a href="${e.songPath}" class="song-link" title="View Song">
                <span>\u{1F3B5}</span> Song
            </a>`:"";return`
            <article class="study-card" style="opacity: 0;">
                <a href="${l}" class="study-card-link">
                    <div class="study-card-header">
                        <h4 class="study-card-title">
                            ${e.name} ${a}
                        </h4>
                        <div class="study-card-tags">${s}</div>
                    </div>
                    <div class="study-card-body">
                        <p class="study-card-meta">${n}</p>
                        <p class="study-card-desc">${e.summary||""}</p>
                    </div>
                    <div class="study-card-arrow">
                        <svg viewBox="0 0 24 24">
                            <path d="M9 5l7 7-7 7" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                    </div>
                </a>
                ${o}
            </article>
        `}getTagClass(e){let t=e.toLowerCase();return t.includes("group")||t.includes("unnamed")?"group":t.includes("warning")||t.includes("antagonist")?"warning":""}animateCardEntrance(){document.querySelectorAll('.study-card[style*="opacity: 0"]').forEach((t,a)=>{setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)",t.style.transition="opacity 0.5s ease, transform 0.5s ease"},a*50)})}async loadFeaturedCharacters(){let e=document.getElementById("featured-grid");if(!e)return;let t=[];this.filterGender==="female"?t=[{book:"judges",id:"deborah",name:"Deborah",hebrew:"\u05D3\u05B0\u05BC\u05D1\u05D5\u05B9\u05E8\u05B8\u05D4",desc:"Prophet, judge, and military leader. The only female judge who led Israel to victory over Canaanite oppression.",meta:"Judges 4-5 \u2022 Multi-page Study",multiPage:!0},{book:"genesis",id:"sarah",name:"Sarah",hebrew:"\u05E9\u05B8\u05C2\u05E8\u05B8\u05D4",desc:"Mother of nations, wife of Abraham. Her story demonstrates faith through struggle with infertility and God's promise fulfillment.",meta:"Genesis 11-25 \u2022 Complete Profile",multiPage:!1},{book:"ruth",id:"ruth",name:"Ruth",hebrew:"\u05E8\u05D5\u05BC\u05EA",desc:"Moabite woman whose loyalty and faithfulness led to her becoming great-grandmother of King David.",meta:"Book of Ruth \u2022 Complete Profile",multiPage:!1},{book:"exodus",id:"miriam",name:"Miriam",hebrew:"\u05DE\u05B4\u05E8\u05B0\u05D9\u05B8\u05DD",desc:"Prophetess and sister of Moses who led women in worship after crossing the Red Sea.",meta:"Exodus \u2022 Complete Profile",multiPage:!1},{book:"genesis",id:"hagar",name:"Hagar",hebrew:"\u05D4\u05B8\u05D2\u05B8\u05E8",desc:"Egyptian servant who became mother of Ishmael. Her encounters with God reveal His compassion for the marginalized.",meta:"Genesis 16, 21 \u2022 Complete Profile",multiPage:!1},{book:"judges",id:"delilah",name:"Delilah",hebrew:"\u05D3\u05B0\u05BC\u05DC\u05B4\u05D9\u05DC\u05B8\u05D4",desc:"Philistine woman who betrayed Samson. Her story explores themes of deception, weakness, and divine sovereignty.",meta:"Judges 16 \u2022 Complete Profile",multiPage:!1}]:t=[{book:"genesis",id:"abraham",name:"Abraham",hebrew:"\u05D0\u05B7\u05D1\u05B0\u05E8\u05B8\u05D4\u05B8\u05DD",desc:"Father of faith, covenant recipient, and patriarch of Israel. His journey from Ur to Canaan exemplifies faith and obedience.",meta:"Genesis 11-25 \u2022 Multi-page Study",multiPage:!0},{book:"genesis",id:"sarah",name:"Sarah",hebrew:"\u05E9\u05B8\u05C2\u05E8\u05B8\u05D4",desc:"Mother of nations, wife of Abraham. Her story demonstrates faith through struggle with infertility and God's promise fulfillment.",meta:"Genesis 11-25 \u2022 Complete Profile",multiPage:!1},{book:"exodus",id:"moses",name:"Moses",hebrew:"\u05DE\u05B9\u05E9\u05B6\u05C1\u05D4",desc:"Prophet, lawgiver, and deliverer of Israel from Egypt. Central figure in the Exodus and covenant at Sinai.",meta:"Exodus-Deuteronomy \u2022 Multi-page Study",multiPage:!0},{book:"judges",id:"deborah",name:"Deborah",hebrew:"\u05D3\u05B0\u05BC\u05D1\u05D5\u05B9\u05E8\u05B8\u05D4",desc:"Prophet, judge, and military leader. The only female judge who led Israel to victory over Canaanite oppression.",meta:"Judges 4-5 \u2022 Multi-page Study",multiPage:!0},{book:"genesis",id:"hagar",name:"Hagar",hebrew:"\u05D4\u05B8\u05D2\u05B8\u05E8",desc:"Egyptian servant who became mother of Ishmael. Her encounters with God reveal His compassion for the marginalized.",meta:"Genesis 16, 21 \u2022 Complete Profile",multiPage:!1},{book:"judges",id:"delilah",name:"Delilah",hebrew:"\u05D3\u05B0\u05BC\u05DC\u05B4\u05D9\u05DC\u05B8\u05D4",desc:"Philistine woman who betrayed Samson. Her story explores themes of deception, weakness, and divine sovereignty.",meta:"Judges 16 \u2022 Complete Profile",multiPage:!1}];let a=t.map(s=>`
                <a href="${s.multiPage?`/studies/characters/${s.book}/${s.id}/${s.id}.html`:`/studies/characters/${s.book}/${s.id}.html`}" class="character-card">
                    <div class="character-header">
                        <div class="character-name">
                            ${s.name} 
                            <span class="character-hebrew">${s.hebrew}</span>
                        </div>
                    </div>
                    <div class="character-body">
                        <p class="character-desc">${s.desc}</p>
                        <div class="character-meta">${s.meta}</div>
                    </div>
                </a>
            `).join("");e.innerHTML=a}animateStats(){document.querySelectorAll("[data-target]").forEach(e=>{let t=parseInt(e.dataset.target);if(isNaN(t))return;let a=t/50,s=0,i=setInterval(()=>{s+=a,s>=t?(e.textContent=t+"+",clearInterval(i)):e.textContent=Math.floor(s)},30)})}setupMobileMenu(){let e=document.getElementById("mobileMenuToggle"),t=document.getElementById("navLinks");!e||!t||(e.addEventListener("click",()=>{e.classList.toggle("active"),t.classList.toggle("active")}),document.addEventListener("click",a=>{a.target.closest("nav")||(e.classList.remove("active"),t.classList.remove("active"))}))}setupScrollEffects(){let e;window.addEventListener("scroll",()=>{e&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(()=>{let t=document.getElementById("main-nav");t&&(window.scrollY>100?t.classList.add("scrolled"):t.classList.remove("scrolled"))})})}showError(e){let t=`
            <div class="empty-state">
                <div class="empty-state-icon">\u26A0\uFE0F</div>
                <div class="empty-state-text">Error</div>
                <div class="empty-state-subtext">${e}</div>
            </div>
        `,a=document.getElementById("book-data")||document.querySelector(".container");a?a.innerHTML=t:console.error(e)}};typeof window<"u"&&(window.HubCore=g);var S=g;var f=class{constructor(e={}){this.config={animateStats:!0,enableSearch:!0,enableFilters:!0,enableSmoothScroll:!0,enableScrollEffects:!0,...e},this.init()}init(){this.config.enableScrollEffects&&this.initScrollEffects(),this.config.enableSmoothScroll&&this.initSmoothScroll(),this.config.animateStats&&this.initStatsAnimation(),this.config.enableFilters&&this.initFilters(),this.config.enableSearch&&this.initSearch(),this.initMobileMenu(),this.initAccessibility()}initScrollEffects(){let e=document.getElementById("main-nav");if(!e)return;let t=0;window.addEventListener("scroll",()=>{let a=window.pageYOffset;a>100?e.classList.add("scrolled"):e.classList.remove("scrolled"),t=a},{passive:!0})}initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let a=e.getAttribute("href");if(a==="#")return;let s=document.querySelector(a);if(s){let n=s.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:n,behavior:"smooth"})}})})}initStatsAnimation(){let e={threshold:.5,rootMargin:"0px 0px -10% 0px"},t=new IntersectionObserver(i=>{i.forEach(n=>{n.isIntersecting&&(n.target.querySelectorAll("[data-target]").forEach(o=>this.animateStat(o)),t.unobserve(n.target))})},e);document.querySelectorAll(".hero-stats").forEach(i=>t.observe(i)),document.querySelectorAll(".progress-section").forEach(i=>t.observe(i))}animateStat(e){let t=parseInt(e.dataset.target);if(isNaN(t))return;let a=2e3,s=60,i=t/s,n=0,l=0,o=setInterval(()=>{n+=i,l++,l>=s?(e.textContent=t+(e.dataset.suffix||""),clearInterval(o)):e.textContent=Math.floor(n)+(e.dataset.suffix||"")},a/s)}initFilters(){let e=document.querySelectorAll(".filter-button");e.length!==0&&e.forEach(t=>{t.addEventListener("click",()=>{let a=t.dataset.filter;e.forEach(s=>s.classList.remove("active")),t.classList.add("active"),this.filterItems(a),document.dispatchEvent(new CustomEvent("hubFilterChange",{detail:{filter:a}}))})})}filterItems(e){document.querySelectorAll("[data-category]").forEach(a=>{e==="all"?(a.style.display="",this.fadeIn(a)):(a.dataset.category?.split(" ")||[]).includes(e)?(a.style.display="",this.fadeIn(a)):this.fadeOut(a).then(()=>{a.style.display="none"})})}initSearch(){let e=document.getElementById("searchInput"),t=document.querySelector(".search-button");if(!e)return;t?.addEventListener("click",()=>this.performSearch()),e.addEventListener("keypress",s=>{s.key==="Enter"&&(s.preventDefault(),this.performSearch())});let a;e.addEventListener("input",()=>{clearTimeout(a),a=setTimeout(()=>this.performSearch(),300)}),this.initSearchClear()}initSearchClear(){let e=document.getElementById("clearSearch"),t=document.getElementById("searchInput"),a=document.getElementById("searchResults"),s=document.getElementById("searchResultsCount");e&&t&&e.addEventListener("click",()=>{t.value="",e.style.display="none",a&&(a.innerHTML=""),s&&(s.style.display="none"),t.focus()})}async performSearch(){let t=document.getElementById("searchInput")?.value.toLowerCase().trim()||"",a=document.getElementById("searchResults"),s=document.getElementById("searchResultsCount"),i=document.getElementById("clearSearch");if(i&&(i.style.display=t?"flex":"none"),!t){a&&(a.innerHTML=""),s&&(s.style.display="none");return}a&&(a.innerHTML='<div class="search-loading"></div>');try{let n=[];window.hub&&window.hub.loader?(n=await window.hub.loader.searchCharacters(t),this.displayCharacterResults(n,t,a,s)):(document.querySelectorAll(".study-card, .character-card, .featured-card").forEach(o=>{let r=o.textContent.toLowerCase();r.includes(t)&&n.push({element:o.cloneNode(!0),relevance:this.calculateRelevance(r,t)})}),n.sort((o,r)=>r.relevance-o.relevance),this.displaySearchResults(n,t,a))}catch(n){console.error("Search error:",n),a&&(a.innerHTML=`
                    <div class="empty-state">
                        <div class="empty-state-icon">\u26A0\uFE0F</div>
                        <div class="empty-state-text">Search Error</div>
                        <div class="empty-state-subtext">Please try again</div>
                    </div>
                `)}}displayCharacterResults(e,t,a,s){if(a)if(e.length>0){s&&(s.querySelector(".results-number").textContent=e.length,s.style.display="block");let i=`
                <div class="section-header">
                    <h3 class="section-title">Search Results</h3>
                    <p class="section-subtitle">${e.length} result${e.length!==1?"s":""} for "${t}"</p>
                </div>
                <div class="studies-list cards-grid">
            `;e.forEach(n=>{let l=n.book?.id||"unknown",o=n.profilePath||"#",r=n.hebrew?`<span class="hebrew">${n.hebrew}</span>`:"",p=(n.tags||[]).map(u=>`<span class="tag ${u.toLowerCase().includes("unnamed")?"group":""}">${u}</span>`).join(""),y=Array.isArray(n.references)?n.references.join(", "):"";i+=`
                    <article class="study-card">
                        <a href="${o}" class="study-card-link">
                            <div class="study-card-header">
                                <h4 class="study-card-title">
                                    ${n.name} ${r}
                                </h4>
                                <div class="study-card-tags">${p}</div>
                            </div>
                            <div class="study-card-body">
                                <p class="study-card-meta">${n.meaning||""} \u2022 ${y}</p>
                                <p class="study-card-desc">${n.summary||""}</p>
                                <p class="study-card-meta" style="margin-top: 0.5rem;">
                                    <strong>Book:</strong> ${n.book?.name||"Unknown"}
                                </p>
                            </div>
                            <div class="study-card-arrow">
                                <svg viewBox="0 0 24 24">
                                    <path d="M9 5l7 7-7 7" stroke="currentColor" stroke-width="2" fill="none"/>
                                </svg>
                            </div>
                        </a>
                    </article>
                `}),i+="</div>",a.innerHTML=i}else s&&(s.style.display="none"),a.innerHTML=`
                <div class="empty-state">
                    <div class="empty-state-icon">\u{1F50D}</div>
                    <div class="empty-state-text">No Results Found</div>
                    <div class="empty-state-subtext">Try searching for different keywords</div>
                </div>
            `}calculateRelevance(e,t){let a=0,s=e.toLowerCase(),i=t.toLowerCase();return s===i&&(a+=100),s.startsWith(i)&&(a+=50),s.includes(i)&&(a+=25),new RegExp(`\\b${i}\\b`,"i").test(e)&&(a+=30),a}displaySearchResults(e,t,a){a&&(e.length>0?a.innerHTML=`
                <div class="section-header">
                    <h3 class="section-title">Search Results</h3>
                    <p class="section-subtitle">${e.length} results found for "${t}"</p>
                </div>
                <div class="studies-list">
                    ${e.slice(0,20).map(s=>s.element.outerHTML).join("")}
                </div>
            `:a.innerHTML=`
                <div class="empty-state">
                    <div class="empty-state-icon">\u{1F50D}</div>
                    <div class="empty-state-text">No Results Found</div>
                    <div class="empty-state-subtext">Try searching for different keywords</div>
                </div>
            `,a.scrollIntoView({behavior:"smooth",block:"nearest"}))}initMobileMenu(){document.addEventListener("click",e=>{let t=document.getElementById("main-nav"),a=document.querySelector(".mobile-menu-toggle"),s=document.querySelector(".nav-links");!t?.contains(e.target)&&a?.classList.contains("active")&&(a.classList.remove("active"),s?.classList.remove("active"))})}initAccessibility(){let e=document.createElement("a");e.href="#main-content",e.className="skip-link",e.textContent="Skip to main content",document.body.insertBefore(e,document.body.firstChild),document.addEventListener("keydown",t=>{if(t.key==="Escape"){let a=document.querySelector(".mobile-menu-toggle"),s=document.querySelector(".nav-links");a?.classList.contains("active")&&(a.classList.remove("active"),s?.classList.remove("active")),document.dispatchEvent(new CustomEvent("escapePressed"))}}),this.initDropdownAccessibility()}initDropdownAccessibility(){document.querySelectorAll(".dropdown").forEach(t=>{let a=t.querySelector(".dropdown-toggle"),s=t.querySelector(".dropdown-content"),i=s?.querySelectorAll("a");!a||!s||!i||(a.addEventListener("keydown",n=>{if(n.key==="Enter"||n.key===" "){n.preventDefault();let l=s.style.display==="block";s.style.display=l?"none":"block",!l&&i.length>0&&i[0].focus()}}),i.forEach((n,l)=>{n.addEventListener("keydown",o=>{o.key==="ArrowDown"?(o.preventDefault(),(i[l+1]||i[0]).focus()):o.key==="ArrowUp"?(o.preventDefault(),(i[l-1]||i[i.length-1]).focus()):o.key==="Escape"&&(s.style.display="none",a.focus())})}))})}fadeIn(e,t=300){return new Promise(a=>{e.style.opacity="0",e.style.transition=`opacity ${t}ms ease`,requestAnimationFrame(()=>{e.style.opacity="1",setTimeout(a,t)})})}fadeOut(e,t=300){return new Promise(a=>{e.style.transition=`opacity ${t}ms ease`,e.style.opacity="0",setTimeout(a,t)})}debounce(e,t){let a;return function(...i){let n=()=>{clearTimeout(a),e(...i)};clearTimeout(a),a=setTimeout(n,t)}}throttle(e,t){let a;return function(...s){a||(e.apply(this,s),a=!0,setTimeout(()=>a=!1,t))}}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.hubCommon=new f}):window.hubCommon=new f;var P=f;(function(){"use strict";document.addEventListener("DOMContentLoaded",function(){let d=window.matchMedia("(min-width: 769px)").matches,e=document.querySelector(".mobile-menu-overlay");e||(e=document.createElement("div"),e.className="mobile-menu-overlay",document.body.appendChild(e));let t=document.querySelector(".mobile-menu-toggle"),a=document.querySelector(".nav-links"),s=document.body;if(!t||!a){console.warn("Mobile menu elements not found");return}let i=0;function n(){t.classList.contains("active")?o():l()}function l(){i=window.pageYOffset||document.documentElement.scrollTop,t.classList.add("active"),a.classList.add("active"),e.classList.add("active"),s.classList.add("menu-open"),s.style.position="fixed",s.style.width="100%",s.style.top=`-${i}px`,s.style.overflow="hidden",t.setAttribute("aria-expanded","true"),a.setAttribute("aria-hidden","false")}function o(){t.classList.contains("active")&&(t.classList.remove("active"),a.classList.remove("active"),e.classList.remove("active"),s.classList.remove("menu-open"),s.style.position="",s.style.width="",s.style.top="",s.style.overflow="",window.scrollTo(0,i),t.setAttribute("aria-expanded","false"),a.setAttribute("aria-hidden","true"))}let r=!1;t.addEventListener("click",function(c){r||(c.preventDefault(),c.stopPropagation(),n(),r=!0,setTimeout(()=>{r=!1},300))}),t.addEventListener("touchend",function(c){r||(c.preventDefault(),c.stopPropagation(),n(),r=!0,setTimeout(()=>{r=!1},300))},{passive:!1}),e.addEventListener("click",o),e.addEventListener("touchend",function(c){c.preventDefault(),o()},{passive:!1}),a.querySelectorAll(".dropdown-toggle").forEach(c=>{c.addEventListener("click",function(h){h.preventDefault(),h.stopPropagation(),this.parentElement.classList.toggle("active")})}),a.querySelectorAll("a:not(.dropdown-toggle)").forEach(c=>{c.addEventListener("click",function(h){let m=this.getAttribute("href");m&&m!=="#"&&!m.startsWith("#")&&o()})}),document.addEventListener("keydown",function(c){c.key==="Escape"&&t.classList.contains("active")&&o()});let u;if(window.addEventListener("resize",function(){clearTimeout(u),u=setTimeout(function(){window.innerWidth>768&&t.classList.contains("active")&&o()},250)}),window.addEventListener("orientationchange",function(){setTimeout(o,100)}),/iPhone|iPad|iPod/.test(navigator.userAgent)){let c=0;a.addEventListener("touchstart",function(h){c=h.touches[0].pageY},{passive:!0}),a.addEventListener("touchmove",function(h){let m=h.touches[0].pageY,b=a.scrollTop,L=a.scrollHeight,E=a.clientHeight,C=m>c&&b===0,A=m<c&&b+E>=L;(C||A)&&h.preventDefault()},{passive:!1}),document.addEventListener("touchstart",function(h){t.classList.contains("active")&&h.touches[0].clientX<20&&h.preventDefault()},{passive:!1})}t.setAttribute("aria-label","Toggle navigation menu"),t.setAttribute("aria-expanded","false"),a.setAttribute("aria-hidden","true"),a.setAttribute("aria-label","Main navigation"),document.addEventListener("scroll",function(){t.classList.contains("active")&&window.scrollY>100},{passive:!0}),window.addEventListener("beforeunload",function(){o()}),document.addEventListener("visibilitychange",function(){document.hidden&&t.classList.contains("active")&&o()}),console.log("Mobile menu initialized successfully with iOS fixes")}),"classList"in document.createElement("_")||console.error("This browser does not support classList. Please update your browser."),(()=>{let d=document.querySelector("#menuToggle, .menu-toggle"),e=document.querySelector("#mobileNav, .mobile-nav, .nav-drawer");function t(){d&&d.classList.remove("active"),e&&e.classList.remove("open","active","visible"),document.querySelectorAll(".nav-links .dropdown.open").forEach(i=>{i.classList.remove("open"),i.querySelector(".dropdown-toggle")?.setAttribute("aria-expanded","false");let n=i.querySelector(".dropdown-content");n&&(n.style.display="")})}document.querySelectorAll(".nav-links .dropdown > .dropdown-toggle").forEach(i=>{i.addEventListener("click",n=>{if(window.matchMedia("(max-width: 768px)").matches){n.preventDefault();let l=i.closest(".dropdown"),o=l?.querySelector(".dropdown-content"),r=l?.classList.toggle("open");r!=null&&i.setAttribute("aria-expanded",r?"true":"false"),o&&(o.style.display=r?"block":"none")}})});let a=window.matchMedia("(max-width: 768px)"),s=()=>{a.matches||t()};s(),a.addEventListener?a.addEventListener("change",s):a.addListener(s),document.addEventListener("scroll",()=>{},{passive:!0}),window.addEventListener("beforeunload",()=>{t()}),document.addEventListener("visibilitychange",()=>{document.hidden&&d?.classList.contains("active")&&t()}),console.log("Mobile menu initialized successfully with iOS fixes & resize resets"),"classList"in document.createElement("_")||console.error("This browser lacks classList support. Please update your browser.")})()})();window.HubCore=S;window.HubCommon=P;})();
//# sourceMappingURL=hub-bundle.min.js.map
