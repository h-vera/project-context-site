(()=>{var a=class{constructor(t={}){this.config={animateStats:!0,enableSearch:!0,enableFilters:!0,enableSmoothScroll:!0,enableScrollEffects:!0,...t},this.init()}init(){this.config.enableScrollEffects&&this.initScrollEffects(),this.config.enableSmoothScroll&&this.initSmoothScroll(),this.config.animateStats&&this.initStatsAnimation(),this.config.enableFilters&&this.initFilters(),this.config.enableSearch&&this.initSearch(),this.initMobileMenu(),this.initAccessibility()}initScrollEffects(){let t=document.getElementById("main-nav");if(!t)return;let s=0;window.addEventListener("scroll",()=>{let e=window.pageYOffset;e>100?t.classList.add("scrolled"):t.classList.remove("scrolled"),s=e},{passive:!0})}initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",s=>{s.preventDefault();let e=t.getAttribute("href");if(e==="#")return;let n=document.querySelector(e);if(n){let i=n.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:i,behavior:"smooth"})}})})}initStatsAnimation(){let t={threshold:.5,rootMargin:"0px 0px -10% 0px"},s=new IntersectionObserver(o=>{o.forEach(i=>{i.isIntersecting&&(i.target.querySelectorAll("[data-target]").forEach(c=>this.animateStat(c)),s.unobserve(i.target))})},t);document.querySelectorAll(".hero-stats").forEach(o=>s.observe(o)),document.querySelectorAll(".progress-section").forEach(o=>s.observe(o))}animateStat(t){let s=parseInt(t.dataset.target);if(isNaN(s))return;let e=2e3,n=60,o=s/n,i=0,r=0,c=setInterval(()=>{i+=o,r++,r>=n?(t.textContent=s+(t.dataset.suffix||""),clearInterval(c)):t.textContent=Math.floor(i)+(t.dataset.suffix||"")},e/n)}initFilters(){let t=document.querySelectorAll(".filter-button");t.length!==0&&t.forEach(s=>{s.addEventListener("click",()=>{let e=s.dataset.filter;t.forEach(n=>n.classList.remove("active")),s.classList.add("active"),this.filterItems(e),document.dispatchEvent(new CustomEvent("hubFilterChange",{detail:{filter:e}}))})})}filterItems(t){document.querySelectorAll("[data-category]").forEach(e=>{t==="all"?(e.style.display="",this.fadeIn(e)):(e.dataset.category?.split(" ")||[]).includes(t)?(e.style.display="",this.fadeIn(e)):this.fadeOut(e).then(()=>{e.style.display="none"})})}initSearch(){let t=document.getElementById("searchInput"),s=document.querySelector(".search-button");if(!t)return;s?.addEventListener("click",()=>this.performSearch()),t.addEventListener("keypress",n=>{n.key==="Enter"&&(n.preventDefault(),this.performSearch())});let e;t.addEventListener("input",()=>{clearTimeout(e),e=setTimeout(()=>this.performSearch(),300)})}performSearch(){let s=document.getElementById("searchInput")?.value.toLowerCase()||"",e=document.getElementById("searchResults");if(!s){e&&(e.innerHTML="");return}let n=document.querySelectorAll(".study-item, .book-card, .featured-card"),o=[];n.forEach(i=>{let r=i.textContent.toLowerCase();r.includes(s)&&o.push({element:i.cloneNode(!0),relevance:this.calculateRelevance(r,s)})}),o.sort((i,r)=>r.relevance-i.relevance),this.displaySearchResults(o,s,e)}calculateRelevance(t,s){let e=0,n=t.toLowerCase(),o=s.toLowerCase();return n===o&&(e+=100),n.startsWith(o)&&(e+=50),n.includes(o)&&(e+=25),new RegExp(`\\b${o}\\b`,"i").test(t)&&(e+=30),e}displaySearchResults(t,s,e){e&&(t.length>0?e.innerHTML=`
                <div class="section-header">
                    <h3 class="section-title">Search Results</h3>
                    <p class="section-subtitle">${t.length} results found for "${s}"</p>
                </div>
                <div class="studies-list">
                    ${t.slice(0,20).map(n=>n.element.outerHTML).join("")}
                </div>
            `:e.innerHTML=`
                <div class="empty-state">
                    <div class="empty-state-icon">\u{1F50D}</div>
                    <div class="empty-state-text">No Results Found</div>
                    <div class="empty-state-subtext">Try searching for different keywords</div>
                </div>
            `,e.scrollIntoView({behavior:"smooth",block:"nearest"}))}initMobileMenu(){document.addEventListener("click",t=>{let s=document.getElementById("main-nav"),e=document.querySelector(".mobile-menu-toggle"),n=document.querySelector(".nav-links");!s?.contains(t.target)&&e?.classList.contains("active")&&(e.classList.remove("active"),n?.classList.remove("active"))})}initAccessibility(){let t=document.createElement("a");t.href="#main-content",t.className="skip-link",t.textContent="Skip to main content",document.body.insertBefore(t,document.body.firstChild),document.addEventListener("keydown",s=>{if(s.key==="Escape"){let e=document.querySelector(".mobile-menu-toggle"),n=document.querySelector(".nav-links");e?.classList.contains("active")&&(e.classList.remove("active"),n?.classList.remove("active")),document.dispatchEvent(new CustomEvent("escapePressed"))}}),this.initDropdownAccessibility()}initDropdownAccessibility(){document.querySelectorAll(".dropdown").forEach(s=>{let e=s.querySelector(".dropdown-toggle"),n=s.querySelector(".dropdown-content"),o=n?.querySelectorAll("a");!e||!n||!o||(e.addEventListener("keydown",i=>{if(i.key==="Enter"||i.key===" "){i.preventDefault();let r=n.style.display==="block";n.style.display=r?"none":"block",!r&&o.length>0&&o[0].focus()}}),o.forEach((i,r)=>{i.addEventListener("keydown",c=>{c.key==="ArrowDown"?(c.preventDefault(),(o[r+1]||o[0]).focus()):c.key==="ArrowUp"?(c.preventDefault(),(o[r-1]||o[o.length-1]).focus()):c.key==="Escape"&&(n.style.display="none",e.focus())})}))})}fadeIn(t,s=300){return new Promise(e=>{t.style.opacity="0",t.style.transition=`opacity ${s}ms ease`,requestAnimationFrame(()=>{t.style.opacity="1",setTimeout(e,s)})})}fadeOut(t,s=300){return new Promise(e=>{t.style.transition=`opacity ${s}ms ease`,t.style.opacity="0",setTimeout(e,s)})}debounce(t,s){let e;return function(...o){let i=()=>{clearTimeout(e),t(...o)};clearTimeout(e),e=setTimeout(i,s)}}throttle(t,s){let e;return function(...n){e||(t.apply(this,n),e=!0,setTimeout(()=>e=!1,s))}}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.hubCommon=new a}):window.hubCommon=new a;var u=a;})();
//# sourceMappingURL=hub-common.js.map
